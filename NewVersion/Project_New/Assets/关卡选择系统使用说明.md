# 关卡选择系统使用说明

## 📦 已创建的脚本

### 1. LevelManager.cs - 关卡管理器
负责场景跳转的核心逻辑

### 2. LevelButton.cs - 关卡按钮脚本
挂载到UI按钮上，处理点击跳转

---

## 🚀 使用步骤

### 第一步：设置 Build Settings
1. 打开 `File -> Build Settings`
2. 将所有需要的场景添加到 "Scenes In Build" 列表中：
   - `LevelSelect.unity` （关卡选择场景）
   - `Balatro-Feel-0.unity`
   - `Balatro-Feel-1.unity`
   - `Balatro-Feel-2.unity`
   - 其他游戏场景...

### 第二步：在 LevelSelect 场景中设置
1. 在场景中创建一个空物体（GameObject -> Create Empty）
2. 命名为 "LevelManager"
3. 将 `LevelManager.cs` 脚本挂载到该物体上

### 第三步：设置关卡按钮
对于每个关卡按钮：
1. 选中该按钮（Button）物体
2. 添加 `LevelButton.cs` 脚本（Add Component -> Level Button）
3. 在 Inspector 中设置 "Target Scene Name" 字段
   - 例如：`Balatro-Feel-0` 或 `Balatro-Feel-1`
   - ⚠️ 注意：填写场景名称时不需要 `.unity` 后缀

### 第四步：在游戏场景中添加返回功能
在游戏场景中需要返回关卡选择的地方（如返回按钮）：

**方法1：使用UI按钮事件**
1. 创建一个返回按钮
2. 在按钮的 `OnClick()` 事件中：
   - 添加事件 -> 选择 `LevelManager` -> 选择方法 `ReturnToLevelSelect()`

**方法2：在代码中调用**
```csharp
// 在任何脚本中直接调用
LevelManager.ReturnToLevelSelect();
```

---

## 📝 脚本功能说明

### LevelManager 主要方法：

#### `LoadLevel(string sceneName)`
通过场景名称加载关卡
```csharp
levelManager.LoadLevel("Balatro-Feel-0");
```

#### `LoadLevel(int sceneIndex)`
通过场景索引加载关卡
```csharp
levelManager.LoadLevel(1);
```

#### `ReturnToLevelSelect()` ⭐
返回到关卡选择页面（静态方法）
```csharp
LevelManager.ReturnToLevelSelect();
```

#### `ReloadCurrentLevel()`
重新加载当前场景
```csharp
levelManager.ReloadCurrentLevel();
```

#### `QuitGame()`
退出游戏
```csharp
levelManager.QuitGame();
```

---

## 🎯 典型使用场景

### 场景1：关卡选择页面
```
[LevelSelect场景]
  ├── LevelManager (GameObject)
  │   └── LevelManager.cs
  ├── Canvas
  │   ├── Level1Button (Button)
  │   │   └── LevelButton.cs (targetSceneName: "Balatro-Feel-0")
  │   ├── Level2Button (Button)
  │   │   └── LevelButton.cs (targetSceneName: "Balatro-Feel-1")
  │   └── Level3Button (Button)
  │       └── LevelButton.cs (targetSceneName: "Balatro-Feel-2")
```

### 场景2：游戏场景中返回
```
[游戏场景]
  ├── Canvas
  │   └── BackButton (Button)
  │       └── OnClick() -> LevelManager.ReturnToLevelSelect()
```

---

## ⚠️ 注意事项

1. **场景名称必须正确**：确保 `targetSceneName` 填写的名称与场景文件名完全一致（不含.unity后缀）

2. **Build Settings 配置**：所有需要跳转的场景都必须添加到 Build Settings 中

3. **LevelManager 单例**：LevelManager 使用了单例模式和 `DontDestroyOnLoad`，会在场景切换时保持存在

4. **返回接口是静态方法**：`ReturnToLevelSelect()` 是静态方法，可以在任何地方调用，无需引用 LevelManager 实例

---

## 🔧 调试技巧

1. 如果场景加载失败，检查 Console 中的错误信息
2. 确认场景名称拼写正确
3. 确认场景已添加到 Build Settings
4. 在 Editor 中测试时，如果出现问题，检查 LevelManager 是否正确挂载

---

## 🎨 扩展建议（未来可添加）

- 关卡锁定/解锁系统
- 关卡进度保存（使用 PlayerPrefs）
- 场景加载进度条
- 场景切换过渡动画
- 星级评价系统
